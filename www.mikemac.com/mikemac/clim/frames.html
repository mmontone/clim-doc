<html><head><title>CLIM: 28 Application Frames</title></head><body>
<br><table width=100%><tr valign="baseline">
<td width=25% align=left><a href="commands.html">Command Processing</a></td>
<td width=25% align=center><a href="toc.html">Contents</a></td>
<td width=25% align=center><a href="index.html">Index</a></td>
<td width=25% align=right><a href="panes.html">Panes</a></td>
</tr></table><br><hr><br>
<p>
<br><a name="28"><h1>28 Application Frames</h1></a>
<a name="LABEL=application-frames"></a> <a name="28.1"><h2>28.1 Overview of Application Frames</h2></a>
<a name="CONCEPT=Application frames"><b><i>Application frames</i></b></a> (or simply, <a name="CONCEPT=frames"><b><i>frames</i></b></a> ) are the central
abstraction defined by CLIM for presenting an application's user interface.
Many of the other features and facilities provided by CLIM (for example, the
generic command loop, gadgets, look and feel independence) can be conveniently
accessed through the frame facility.  Frames can be displayed as either
top-level windows or regions embedded within the space of the user interfaces of
other applications.  In addition to controlling the screen real estate managed
by an application, a frame keeps track of the Lisp state variables that contain
the state of the application.
<p>
The visual aspect of an application frame is established by defining a hierarchy
of <a name="CONCEPT=panes"><b><i>panes</i></b></a> .  CLIM panes are interactive objects that are analogous to
the windows, gadgets, or widgets of other toolkits.  Application builders can
compose their application's user interface from a library of standard panes or
by defining and using their own pane types.  Application frames can use a number
of different types of panes including <a name="CONCEPT=layout panes"><b><i>layout panes</i></b></a> for spatially
organizing panes, <a name="CONCEPT=user panes"><b><i>user panes</i></b></a> for presenting application specific
information, and <a name="CONCEPT=gadget panes"><b><i>gadget panes</i></b></a> for displaying data and obtaining user
input.  Panes are describe in greater detail in Chapter <a href="panes.html#LABEL=panes"><b><i>Panes</i></b></i></a> and
Chapter <a href="gadgets.html#LABEL=gadgets"><b><i>Gadgets</i></b></i></a> .
<p>
Frames are managed by special applications called <a name="CONCEPT=frame managers"><b><i>frame managers</i></b></a> .
Frame managers control the realization of the look and feel of a frame.  The
frame manager interprets the specification of the application frame in the
context of the available window system facilities, taking into account
preferences expressed by the user.  In addition, the frame manager takes care of
attaching the pane hierarchy of an application frame to an appropriate place in
a window hierarchy.  The most common type of frame manager is one that allows
the user to manipulate the frames of other applications.  This type of
application is typically called a desktop manager, or in X Windows terminology,
a window manager.  In many cases, the window manager will be a non-Lisp
application.  In these cases, the frame manager will act as a mediator between
the Lisp application and the host desktop manager.
<p>
Some applications may act as frame managers that allow the frames of other
applications to be displayed with their own frames.  For example, a text editor
might allow figures generated by a graphic editor to be edited in place by
managing the graphics editor's frame within its own frame.
<p>
Application frames provide support for a standard interaction processing loop,
like the Lisp ``read-eval-print'' loop, called a <a name="CONCEPT=command loop"><b><i>command loop</i></b></a> .  The
application programmer has to write only the code that implements the
frame-specific commands and output display functions.  A key aspect of the
command loop is the separation of the specification of the frame's commands from
the specification of the end-user interaction style.
<p>
The standard interaction loop consists of reading an input ``sentence'' (the
command and all of its operands), executing the command, and updating the
displayed information as appropriate.  CLIM implementations are free to run the
display update part of the loop at a lower priority than command execution, for
example, some implementations may choose not to update the display if there is
typed-ahead input.  Note that by default command execution and display will not
occur simultaneously, so user-defined functions need not have to cope with
multiprocessing.  Of course, the programmer can use multiple processes, but CLIM
neither directly supports nor precludes doing so.
<p>
To write an application that uses the standard interaction loop provided by
CLIM, an application programmer does the following:
<p>
<ul> <li> Defines the presentation types that correspond to the user interface
entities of the application.
<p>
<li> Defines the commands that correspond to the visible operations of the
application, specifying the presentation types of the operands involved in each
command.
<p>
<li> Defines the set of frames and panes needed to support the application.
<p>
<li> Defines the output display functions associated with each of the panes
(possibly using other facilities such as the incremental redisplay).
</ul> Taking as an example a simple ECAD program, the programmer would first define
the appropriate presentation types, such as wires, input and output signals,
gates, resistors, and so forth.  He would then define the program's commands in
terms of these types.  For example, the ``Connect'' command might take two
operands, one of type ``component'' and the other of type ``wire''.  The
programmer may wish to specify the interaction style for invoking each command,
for example, direct manipulation via translators, or selection of commands from
menus.  After defining an application frame that includes a CLIM stream pane,
the programmer then writes the frame-specific display routine that displays the
circuit layout.  Now the application is ready to go.  The end-user selects a
command (via a menu or command-line, or whatever), the top-level loop takes care
of collecting the operands for that command (via a variety of user gestures),
and then the application invokes the command.  The command may have a
side-effect on the frame's ``database'' of information, which can in turn affect
the output displayed by the redisplay phase.
<p>
Note that this definition of the standard interaction loop does not constrain
the interaction style to be a command-line interface.  The input sentence may be
entered via single keystrokes, pointer input, menu selection, dialogs, or by
typing full command lines.
<p>

<a name="28.2"><h2>28.2 Defining and Creating Application Frames</h2></a>
<a name="Protocol&nbsp;Class application-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="100%"><b>application-frame</b></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Protocol&nbsp;Class]</b></td></tr></table>The protocol class that corresponds to an application frame.
If you want to create a new class that behaves like an application frame, it should be a subclass of <b>application-frame</b>. Subclasses of <b>application-frame</b> must obey the application frame protocol.All application frame classes are mutable.
<p>
<a name="Predicate application-frame-p"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>application-frame-p</b></td><td valign="baseline" width="100%"><i>object</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Predicate]</b></td></tr></table>Returns <a href="frames.html#CONCEPT=true"><i>true</i></a> if <i>object</i> is an <a href="frames.html#CONCEPT=application frame"><i>application frame</i></a> , otherwise
returns <a href="frames.html#CONCEPT=false"><i>false</i></a> .
<p>
<a name="Init&nbsp;arg :name"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="100%"><b>:name</b></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Init&nbsp;arg]</b></td></tr></table><a name="Init&nbsp;arg :pretty-name"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="100%"><b>:pretty-name</b></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Init&nbsp;arg]</b></td></tr></table><a name="Init&nbsp;arg :command-table"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="100%"><b>:command-table</b></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Init&nbsp;arg]</b></td></tr></table><a name="Init&nbsp;arg :disabled-commands"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="100%"><b>:disabled-commands</b></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Init&nbsp;arg]</b></td></tr></table><a name="Init&nbsp;arg :panes"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="100%"><b>:panes</b></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Init&nbsp;arg]</b></td></tr></table><a name="Init&nbsp;arg :menu-bar"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="100%"><b>:menu-bar</b></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Init&nbsp;arg]</b></td></tr></table><a name="Init&nbsp;arg :calling-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="100%"><b>:calling-frame</b></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Init&nbsp;arg]</b></td></tr></table><a name="Init&nbsp;arg :state"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="100%"><b>:state</b></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Init&nbsp;arg]</b></td></tr></table><a name="Init&nbsp;arg :properties"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="100%"><b>:properties</b></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Init&nbsp;arg]</b></td></tr></table>All subclasses of <tt>application-frame</tt> must handle these initargs, which are
used to specify, respectively, the name, pretty name, command table, initial set
of disabled commands, the panes, the menu bar, calling frame, state, and initial
properties for the frame.
<p>
<a name="Class standard-application-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="100%"><b>standard-application-frame</b></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Class]</b></td></tr></table>The instantiable standard class that implements application frames.  By default,
most application frame classes will inherit from this class, unless a
non-<tt>nil</tt> value for <i>superclasses</i> is supplied to <tt>define-application-frame</tt> .
<p>

<a name="Macro define-application-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>define-application-frame</b></td><td valign="baseline" width="100%"><i>name superclasses slots <tt>&amp;rest</tt> options</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Macro]</b></td></tr></table>Defines a frame and CLOS class named by the symbol <i>name</i> that inherits from
<i>superclasses</i> and has state variables specified by <i>slots</i> .
<i>superclasses</i> is a list of superclasses that the new class will inherit
from (as in <tt>defclass</tt> ).  When <i>superclasses</i> is <tt>nil</tt> , it behaves as
though a superclass of <tt>standard-application-frame</tt> was supplied.
<i>slots</i> is a list of additional slot specifiers, whose syntax is the same as
the slot specifiers in <tt>defclass</tt> .  Each instance of the frame will have
slots as specified by these slot specifiers.  These slots will typically hold
any per-instance frame state.
<p>
<i>options</i> is a list of <tt>defclass</tt> -style options, and can include the
usual <tt>defclass</tt> options, plus any of the following:
<p>
<ul> <li> <tt>:pane</tt> <i>form</i> , where <i>form</i> specifies the single pane in the
application.  The default is <tt>nil</tt> , meaning that there is no single pane.
This is the simplest way to define a pane hierarchy.  The <tt>:pane</tt> option is
mutually exclusive with the <tt>:panes</tt> options.  See Section <a href="frames.html#LABEL=frame-panes"><b><i>Specifying the Panes of a Frame</i></b></i></a> for a complete description of the <tt>:pane</tt> option.
<p>
<li> <tt>:panes</tt> <i>form</i> , where <i>form</i> is an alist that specifies names
and panes of the application.  The default is <tt>nil</tt> , meaning that there are
no named panes.  The <tt>:panes</tt> and <tt>:pane</tt> options are mutually exclusive.
See Section <a href="frames.html#LABEL=frame-panes"><b><i>Specifying the Panes of a Frame</i></b></i></a> for a complete description of the <tt>:panes</tt> option.
<p>
<li> <tt>:layouts</tt> <i>form</i> , where <i>form</i> specifies the layout.  The
default layout is to lay out all of the named panes in horizontal strips.  See
Section <a href="frames.html#LABEL=frame-panes"><b><i>Specifying the Panes of a Frame</i></b></i></a> for a complete description of the <tt>:layouts</tt> option.
<p>
<li> <tt>:command-table</tt> <i>name-and-options</i> , where <i>name-and-options</i> is a list consisting of the name of the application frame's command table
followed by some keyword-value pairs.  The keywords can be <tt>:inherit-from</tt> or
<tt>:menu</tt> (which are as in <tt>define-command-table</tt> ).  The default is to
create a command table with the same name as the application frame.
<p>
<li> <tt>:command-definer</tt> <i>value</i> , where <i>value</i> either <tt>nil</tt> ,
<tt>t</tt> , or another symbol.  When it is <tt>nil</tt> , no command-defining macro is
defined.  When it is <tt>t</tt> , a command-defining macro is defined, whose name is
of the form <tt>define-<i>name</i>-command</tt> .  When it is another symbol, the
symbol names the command-defining macro.  The default is <tt>t</tt> .
<p>
<li> <tt>:menu-bar</tt> <i>form</i> is used to specify what commands will appear
in a ``menu bar''.  It typically specifies the top-level commands of the
application.  <i>form</i> is either <tt>nil</tt> , meaning there is no menu bar;
<tt>t</tt> , meaning that the menu from frame's command table (from the
<tt>:command-table</tt> option) should be used; a symbol that names a command table,
meaning that that command table's menu should be used; or a list, which is
interpreted the same way the <tt>:menu</tt> option to <tt>define-command-table</tt> is
interpreted.  The default is <tt>t</tt> .
<p>
<li> <tt>:disabled-commands</tt> <i>commands</i> , where <i>commands</i> is a list of
command names that are initially disabled in the application frame.  The set of
enabled and disabled commands can be modified via <tt>(setf~command-enabled)</tt> .
<p>
<li> <tt>:top-level</tt> <i>form</i> , where <i>form</i> is a list whose first
element is the name of a function to be called to execute the top-level loop.
The function must take at least one argument, the frame.  The rest of the list
consists of additional arguments to be passed to the function.  The default
function is <tt>default-frame-top-level</tt> .
<p>
<li> <tt>:icon</tt> <i>pixmap</i> specifies a pixmap to be displayed by the host's
window manager when the frame is iconified.
<p>
<li> <tt>:geometry</tt> <i>plist</i> , where <i>plist</i> is a property list
containing the default values for the <tt>:left</tt> , <tt>:top</tt> , <tt>:right</tt> ,
<tt>:bottom</tt> , <tt>:width</tt> , and <tt>:height</tt> options to
<tt>make-application-frame</tt> .
</ul> The <i>name</i> , <i>superclasses</i> , and <i>slots</i> arguments are not evaluated.
The values of each of the options are evaluated.
<p>

<a name="Function make-application-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>make-application-frame</b></td><td valign="baseline" width="100%"><i>frame-name <tt>&amp;rest</tt> options
                                 <tt>&amp;key</tt> pretty-name 
                                      frame-manager enable state 
                                      left top right bottom width height
                                      save-under frame-class
                                 <tt>&amp;allow-other-keys</tt> </i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Function]</b></td></tr></table>Makes an instance of the application frame of type <i>frame-class</i> .  If
<i>frame-class</i> is not supplied, it defaults to <i>frame-name</i> .
<p>
The size options <i>left</i> , <i>top</i> , <i>right</i> , <i>bottom</i> , <i>width</i> ,
and <i>height</i> can be used to specify the initial size of the frame.  If they
are unsupplied and <tt>:geometry</tt> was supplied to <tt>define-application-frame</tt> ,
then these arguments default from the specified geometry.
<p>
<i>options</i> are passed as additional arguments to <tt>make-instance</tt> , after
the <i>pretty-name</i> , <i>frame-manager</i> , <i>enable</i> , <i>state</i> ,
<i>save-under</i> , <i>frame-class</i> , and size options have been removed.
<p>
If <i>save-under</i> is <a href="frames.html#CONCEPT=true"><i>true</i></a> , then the sheets used to implement the user
interface of the frame will have the ``save under'' property, if the host window
system supports it.
<p>
If <i>frame-manager</i> is provided, then the frame is adopted by the specified
frame manager.  If the frame is adopted and either of <i>enable</i> or
<i>state</i> are provided, the frame is pushed into the given state.
<p>
Once a frame has been create, <tt>run-frame-top-level</tt> can be called to make the
frame visible and run its top-level function.
<p>
<a name="Variable *application-frame*"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="100%"><b>*application-frame*</b></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Variable]</b></td></tr></table>The current application frame.  The global value is CLIM's default application,
which serves only as a repository for whatever internal state is needed by CLIM
to operate properly.  This variable is typically used in the bodies of command
to gain access to the state variables of the application frame, usually in
conjunction with <tt>with-slots</tt> or <tt>slot-value</tt> .
<p>
<a name="Macro with-application-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>with-application-frame</b></td><td valign="baseline" width="100%"><i>(frame) <tt>&amp;body</tt> body</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Macro]</b></td></tr></table>This macro provides lexical access to the ``current'' frame for use with
commands and the <tt>:pane</tt> , <tt>:panes</tt> , and <tt>:layouts</tt> options.
<i>frame</i> is bound to the current frame within the context of one of those
options.
<p>
<i>frame</i> is a symbol; it is not evaluated.  <i>body</i> may have zero or more
declarations as its first forms.
<p>
<a name="Function map-over-frames"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>map-over-frames</b></td><td valign="baseline" width="100%"><i>function <tt>&amp;key</tt> port frame-manager</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Function]</b></td></tr></table>Applies the function <i>function</i> to all of the application frames that
``match'' <i>port</i> and <i>frame-manager</i> .  If neither <i>port</i> nor
<i>frame-manager</i> is supplied, all frames are considered to match.  If
<i>frame-manager</i> is supplied, only those frames that use that frame manager
match.  If <i>port</i> is supplied, only those frames that use that port match.
<p>
<i>function</i> is a function of one argument, the frame.  It has dynamic extent.
<p>

<a name="Generic function destroy-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>destroy-frame</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Destroys the application frame <i>frame</i> .
<p>
<a name="Generic function raise-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>raise-frame</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Raises the application frame <i>frame</i> to be on top of all of the other host
windows by invoking <tt>raise-sheet</tt> on the frame's top-level sheet.
<p>
<a name="Generic function bury-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>bury-frame</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Buries the application frame <i>frame</i> to be underneath all of the other host
windows by invoking <tt>bury-sheet</tt> on the frame's top-level sheet.
<p>

<a name="LABEL=frame-panes"></a> 
<a name="28.2.1"><h3>28.2.1 Specifying the Panes of a Frame</h3></a>
The panes of a frame can be specified in one of two different ways.  If the
frame has a single layout and no need of named panes, then the <tt>:pane</tt> option
can be used.  Otherwise if named panes or multiple layouts are required, the
<tt>:panes</tt> and <tt>:layouts</tt> options can be used.  Note that the <tt>:pane</tt> option is mutually exclusive with <tt>:panes</tt> and <tt>:layouts</tt> .   It is
meaningful to define frames that have no panes at all; the frame will simply
serve as a repository for state and commands.
<p>
Panes and gadgets are discussed in detail in Chapter <a href="panes.html#LABEL=panes"><b><i>Panes</i></b></i></a> and
Chapter <a href="gadgets.html#LABEL=gadgets"><b><i>Gadgets</i></b></i></a> .
<p>
The value of the <tt>:pane</tt> option is a form that is used to create a single
(albeit arbitrarily complex) pane.  For example:
<p>
<pre>(vertically ()
  (tabling ()
    ((horizontally ()
       (make-pane 'toggle-button)
       (make-pane 'toggle-button)
       (make-pane 'toggle-button))
     (make-pane 'text-field))
    ((make-pane 'push-button :label "a button")
     (make-pane 'slider)))
  (scrolling ()
    (make-pane 'application-pane
               :display-function 'a-display-function))
  (scrolling ()
    (make-pane 'interactor-pane)))
</pre> If the <tt>:pane</tt> option is not used, a set of named panes can be specified with
the <tt>:panes</tt> option.  Optionally, <tt>:layouts</tt> can also be used to describe
different layouts of the set of panes.
<p>
The value of the <tt>:panes</tt> option is a list, each entry of which is of the
form <i>(name . body)</i> .  <i>name</i> is a symbol that names the pane, and
<i>body</i> specifies how to create the pane.  <i>body</i> is either a list
containing a single element that is itself a list, or a list consisting of a
symbol followed by zero or more keyword-value pairs.  In the first case, the
<i>body</i> is a form exactly like the form used in the <tt>:pane</tt> option.  In
the second case, <i>body</i> is a <a name="CONCEPT=pane abbreviation"><b><i>pane abbreviation</i></b></a> where the initial
symbol names the type of pane, and the keyword-value pairs are pane options.
For gadgets, the pane type is the class name of the abstract gadget (for
example, <tt>slider</tt> or <tt>push-button</tt> ).  For CLIM stream panes, the following
abbreviations are defined:
<p>
<ul> <li> <tt>:interactor</tt> ---a pane of type <tt>interactor-pane</tt> .
<p>
<li> <tt>:application</tt> ---a pane of type <tt>application-pane</tt> .
<p>
<li> <tt>:command-menu</tt> ---a pane of type <tt>command-menu-pane</tt> .
<p>
<li> <tt>:pointer-documentation</tt> ---a pane suitable for displaying pointer
documentation, if the host window system does not provide this.
<p>
<li> <tt>:title</tt> ---a pane suitable for displaying the title of the application,
if the host window system does not provide this.
<p>
<li> <tt>:accept-values</tt> ---a pane that can hold a ``modeless''
<tt>accepting-values</tt> dialog.
</ul> See Chapter <a href="panes.html#LABEL=panes"><b><i>Panes</i></b></i></a> and Chapter <a href="gadgets.html#LABEL=gadgets"><b><i>Gadgets</i></b></i></a> for more information on the
individual pane and gadget classes, and the options they support.
<p>
An example of the use of <tt>:panes</tt> is:
<p>
<pre>(:panes
  (buttons (horizontally ()
             (make-pane 'push-button :label "Press me")
             (make-pane 'push-button :label "Squeeze me")))
  (toggle toggle-button 
          :label "Toggle me")
  (interactor :interactor
              :width 300 :height 300)
  (application :application
               :display-function 'another-display-function
               :incremental-redisplay t))
</pre> The value of the <tt>:layouts</tt> option is a list, each entry of which is of the
form <i>(name layout)</i> .  <i>name</i> is a symbol that names the layout, and
<i>layout</i> specifies the layout.  <i>layout</i> is a form like the form used in
the <tt>:pane</tt> option, with the extension to the syntax such that the name of a
named pane can be used wherever a pane may appear.  (This will typically be
implemented by using <tt>symbol-macrolet</tt> for each of the named panes.)  For
example, assuming a frame that uses the <tt>:panes</tt> example above, the following
layouts could be specified:
<p>
<pre>(:layouts
  (default 
    (vertically ()
      button toggle 
      (scrolling () application)
      interactor))
  (alternate
    (vertically ()
      (scrolling () application)
      (scrolling () interactor)
      (horizontally ()
        button toggle))))
</pre> The syntax for <tt>:layouts</tt> can be concisely expressed as:
<p>
<ul> <tt>:layouts (<i>layout-name layout-panes</i> )</tt> <i>layout-name</i> is a symbol.
<p>
<i>layout-panes</i> is <i>layout-panes1</i> or <tt>(<i>size-spec layout-panes1</i> )</tt> .
<p>
<i>layout-panes1</i> is a <i>pane-name</i> , or a <i>layout-macro-form</i> , or
<i>layout-code</i> .
<p>
<i>layout-code</i> is lisp code that generates a pane, which may include
the name of a named pane.
<p>
<i>size-spec</i> is a rational number less than 1, or <tt>:fill</tt> , or
<tt>:compute</tt> .
<p>
<i>layout-macro-form</i> is <tt>(<i>layout-macro-name</i> (<i>options</i> ) .
<i>body</i> )</tt> .
<p>
<i>layout-macro-name</i> is one of the layout macros, such as
<tt>outlining</tt> , <tt>spacing</tt> , <tt>labelling</tt> , <tt>vertically</tt> , <tt>horizontally</tt> ,
or <tt>tabling</tt> .
</ul> <a name="28.3"><h2>28.3 Application Frame Functions</h2></a>
The generic functions described in this section are the functions that can be
used to read or modify the attributes of a frame.  All classes that inherit from
<tt>application-frame</tt> must inherit or implement methods for all of these
functions.
<p>
<a name="Generic function frame-name"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-name</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns the name of the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> , which is a symbol.
<p>
<a name="Generic function frame-pretty-name"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-pretty-name</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns the ``pretty name'' of the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> , which is a string.
<p>
<a name="Generic function (setf frame-pretty-name)"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>(setf frame-pretty-name)</b></td><td valign="baseline" width="100%"><i>name frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Sets the pretty name of the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> to <i>name</i> , which must
be a string.  Changing the pretty name of a frame notifies its frame manager,
which in turn may change some aspects of the appearance of the frame, such as
its title bar.
<p>

<a name="Generic function frame-command-table"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-command-table</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns the command table for the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .
<p>
<a name="Generic function (setf frame-command-table)"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>(setf frame-command-table)</b></td><td valign="baseline" width="100%"><i>command-table frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Sets the command table for the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> to <i>command-table</i> .
Changing the frame's command table will redisplay the command menus (or menu
bar) as needed.  <i>command-table</i> is a <a href="http://www.mikemac.com/mikemac/clim/commands.htmlcommands.html#CONCEPT=command table designator"><i>command table designator</i></a> .
<p>

<a name="Generic function frame-standard-output"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-standard-output</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns the stream that will be used for <tt>*standard-output*</tt> for the
<a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .  The default method (on
<tt>standard-application-frame</tt> ) returns the first named pane of type
<tt>application-pane</tt> that is visible in the current layout; if there is no such
pane, it returns the first pane of type <tt>interactor-pane</tt> that is exposed in
the current layout.
<p>
<a name="Generic function frame-standard-input"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-standard-input</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns the stream that will be used for <tt>*standard-input*</tt> for the
<a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .  The default method (on
<tt>standard-application-frame</tt> ) returns the first named pane of type
<tt>interactor-pane</tt> that is visible in the current layout; if there is no such
pane, the value returned by frame-standard-output is used.
<p>
<a name="Generic function frame-query-io"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-query-io</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns the stream that will be used for <tt>*query-io*</tt> for the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .  The default method (on <tt>standard-application-frame</tt> ) returns
the value returned by <tt>frame-standard-input</tt> ; if that is <tt>nil</tt> , it returns
the value returned by <tt>frame-standard-output</tt> .
<p>
<a name="Generic function frame-error-output"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-error-output</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns the stream that will be used for <tt>*error-output*</tt> for the
<a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .  The default method (on
<tt>standard-application-frame</tt> ) returns the same value as
<tt>frame-standard-output</tt> .
<p>
<a name="Variable *pointer-documentation-output*"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="100%"><b>*pointer-documentation-output*</b></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Variable]</b></td></tr></table>This will be bound either to <tt>nil</tt> or to a stream on which pointer
documentation will be displayed.
<p>
<a name="Generic function frame-pointer-documentation-output"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-pointer-documentation-output</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns the stream that will be used for <tt>*pointer-documentation-output*</tt> for the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .  The default method (on
<tt>standard-application-frame</tt> ) returns the first pane of type
<tt>pointer-documentation-pane</tt> .  If this returns <tt>nil</tt> , no pointer
documentation will be generated for this frame.
<p>

<a name="Generic function frame-calling-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-calling-frame</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns the application frame that invoked the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .
<p>
<a name="Generic function frame-parent"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-parent</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns the object that acts as the parent for the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .
This often, but not always, returns the same value as <tt>frame-manager</tt> .
<p>

<a name="Generic function frame-panes"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-panes</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns the pane that is the top-level pane in the current layout of the
<a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> 's named panes.  This will typically be some sort of a
layout pane.
<p>
<a name="Generic function frame-top-level-sheet"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-top-level-sheet</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns the sheet that is the top-level sheet for the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .
This is the sheet that has as its descendents all of the panes of <i>frame</i> .
<p>
The value returned by <tt>frame-panes</tt> will be a descendents of the value of
<tt>frame-top-level-sheet</tt> .
<p>
<a name="Generic function frame-current-panes"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-current-panes</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns a list of those named panes in the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> 's current
layout.  If there are no named panes (for example, the <tt>:pane</tt> option was used),
only the single, top level pane is returned.
<i>This function returns objects that reveal CLIM's internal state; do not modify those objects. </i><a name="Generic function get-frame-pane"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>get-frame-pane</b></td><td valign="baseline" width="100%"><i>frame pane-name</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns the named CLIM stream pane in the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> whose name is
<i>pane-name</i> .
<p>
<a name="Generic function find-pane-named"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>find-pane-named</b></td><td valign="baseline" width="100%"><i>frame pane-name</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns the pane in the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> whose name is <i>pane-name</i> .
This can return any type of pane, not just CLIM stream panes.
<p>

<a name="Generic function frame-current-layout"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-current-layout</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns the current layout for the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .  The layout is
named by a symbol.
<p>
<a name="Generic function (setf frame-current-layout)"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>(setf frame-current-layout)</b></td><td valign="baseline" width="100%"><i>layout frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Sets the layout of the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> to be the new layout specified
by <i>new-layout</i> .  <i>layout</i> must be a symbol that names one of the
possible layouts.
<p>
Changing the layout of the frame must recompute what panes are used for the
bindings of the standard stream variables (such as <tt>*standard-input*</tt> ).  Some
implementations of CLIM may cause the application to ``throw'' all the way back
to <tt>run-frame-top-level</tt> in order to do this.  After the new layout has been
computed, the contents of each of the panes must be displayed to the degree
necessary to ensure that all output is visible.
<p>
<a name="Generic function frame-all-layouts"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-all-layouts</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns a list of the names of all of the possible layouts for the frame.
<p>
<a name="Generic function layout-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>layout-frame</b></td><td valign="baseline" width="100%"><i>frame <tt>&amp;optional</tt> width height</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Resizes the frame and lays out the current pane hierarchy using the layout
specified by <tt>frame-current-layout</tt> , according to the layout protocol.  The
basics of the layout protocols are described in Section <a href="panes.html#LABEL=layout-protocol"><b><i>The Layout Protocol</i></b></i></a> .
This function is automatically invoked on a frame when it is adopted, after its
pane hierarchy has been generated.
<p>
If <i>width</i> and <i>height</i> are provided, then this function resizes the
frame to the specified size.  It is an error to provide just <i>width</i> .
<p>
If no optional arguments are provided, this function resizes the frame to the
preferred size of the top-level pane as determined by the space composition pass
of the layout protocol.
<p>
In either case, after the frame is resized, the space allocation pass of the
layout protocol is invoked on the top-level pane.
<p>

<a name="Condition frame-exit"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="100%"><b>frame-exit</b></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Condition]</b></td></tr></table>The condition that is signalled when <tt>frame-exit</tt> is called.  This condition
will handle the <tt>:frame</tt> initarg, which is used to supply the frame that is
being exited from.
<p>
<a name="Generic function frame-exit-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-exit-frame</b></td><td valign="baseline" width="100%"><i>condition</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns the frame that is being exited from associated with the <tt>frame-exit</tt> condition.
<p>
<a name="Generic function frame-exit"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-exit</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Exits from the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .  The default method (on
<tt>standard-application-frame</tt> ) signals a <tt>frame-exit</tt> condition, supplying
<i>frame</i> as the <tt>:frame</tt> initarg.
<p>

<a name="Generic function pane-needs-redisplay"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>pane-needs-redisplay</b></td><td valign="baseline" width="100%"><i>pane</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns two values, the first indicating whether the <a href="frames.html#CONCEPT=pane"><i>pane</i></a> <i>pane</i> needs to be redisplayed, and the second indicating whether the pane needs to be
cleared before being redisplayed.  The first value is <a href="frames.html#CONCEPT=true"><i>true</i></a> when the pane
is to be redisplayed.  The second value is <a href="frames.html#CONCEPT=true"><i>true</i></a> when the pane is to be
cleared.
<p>
<a name="Generic function (setf pane-needs-redisplay)"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>(setf pane-needs-redisplay)</b></td><td valign="baseline" width="100%"><i>value pane</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Indicates that the <a href="frames.html#CONCEPT=pane"><i>pane</i></a> <i>pane</i> should (or should not) be redisplayed
the next time the owning frame executes the redisplay part of its command loop.
<p>
When <i>value</i> is <tt>nil</tt> , the pane will not require redisplay.  When
<i>value</i> is <tt>t</tt> , the pane will be cleared and redisplayed exactly once.
When <i>value</i> is <tt>:command-loop</tt> , the pane will be cleared and redisplayed
in each successive pass through the command loop.  When <i>value</i> is
<tt>:no-clear</tt> , the pane will be redisplayed exactly once without clearing it.
<p>
<a name="Generic function redisplay-frame-pane"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>redisplay-frame-pane</b></td><td valign="baseline" width="100%"><i>frame pane <tt>&amp;key</tt> force-p</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Causes the pane <i>pane</i> within the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> to be redisplayed
immediately.  <i>pane</i> is either a pane or the name of a named pane.  When the
boolean <i>force-p</i> is <a href="frames.html#CONCEPT=true"><i>true</i></a> , the maximum level of redisplay is forced
(that is, the pane is displayed ``from scratch'').
<p>
<a name="Generic function redisplay-frame-panes"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>redisplay-frame-panes</b></td><td valign="baseline" width="100%"><i>frame <tt>&amp;key</tt> force-p</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table><tt>redisplay-frame-panes</tt> causes all of the panes in the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> to be redisplayed immediately by calling <tt>redisplay-frame-pane</tt> on each of the panes in <i>frame</i> that are visible in the current layout.
When the boolean <i>force-p</i> is <a href="frames.html#CONCEPT=true"><i>true</i></a> , the maximum level of redisplay is
forced (that is, the pane is displayed ``from scratch'').
<p>
<a name="Generic function frame-replay"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-replay</b></td><td valign="baseline" width="100%"><i>frame stream <tt>&amp;optional</tt> region</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Replays the contents of <i>stream</i> in the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> within the
region specified by the region <i>region</i> , which defaults to viewport of
<i>stream</i> .
<p>

<a name="Generic function notify-user"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>notify-user</b></td><td valign="baseline" width="100%"><i>frame message
                           <tt>&amp;key</tt> associated-window title documentation
                                exit-boxes name style text-style</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Notifies the user of some event on behalf of the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .
<i>message</i> is a message string.  This function provides a look and feel
independent way for applications to communicate messages to the user.
<p>
<i>associated-window</i> is the window with which the notification will be
associated, as it is for <tt>menu-choose</tt> .  <i>title</i> is a title string to
include in the notification.  <i>text-style</i> is the text style in which to
display the notification.  <i>exit-boxes</i> is as for <i>accepting-values</i> ; it
indicates what sort of exit boxes should appear in the notification.
<i>style</i> is the style in which to display the notification, and is
implementation-dependent.
<p>

<a name="Generic function frame-properties"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-properties</b></td><td valign="baseline" width="100%"><i>frame property</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table><a name="Generic function (setf frame-properties)"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>(setf frame-properties)</b></td><td valign="baseline" width="100%"><i>value frame property</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Frame properties can be used to associate frame specific data with frames
without adding additional slots to the frame's class.  CLIM may use frame
properties internally to store information for its own purposes.
<p>

<a name="28.3.1"><h3>28.3.1 Interface with Presentation Types</h3></a>
This section describes the functions that connect application frames to the
presentation type system.  All classes that inherit from <tt>application-frame</tt> must inherit or implement methods for all of these functions.
<p>
<a name="Generic function frame-maintain-presentation-histories"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-maintain-presentation-histories</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns <a href="frames.html#CONCEPT=true"><i>true</i></a> if the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> maintains histories for its
presentations, otherwise returns <a href="frames.html#CONCEPT=false"><i>false</i></a> .  The default method (on
<tt>standard-application-frame</tt> ) returns <a href="frames.html#CONCEPT=true"><i>true</i></a> if and only if the frame
has at least one interactor pane.
<p>

<a name="Generic function frame-find-innermost-applicable-presentation"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-find-innermost-applicable-presentation</b></td><td valign="baseline" width="100%"><i>frame input-context stream x y <tt>&amp;key</tt> event</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Locates and returns the innermost applicable presentation on the window
<i>stream</i> whose sensitivity region contains the point <tt>(x,y)</tt>, on behalf of
the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> in the input context <i>input-context</i> .
<i>event</i> defaults to <tt>nil</tt> , and is as for
find-innermost-applicable-presentation
<p>
The default method (on <tt>standard-application-frame</tt> ) will simply call
<tt>find-innermost-applicable-presentation</tt> .
<p>
<a name="Generic function frame-input-context-button-press-handler"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-input-context-button-press-handler</b></td><td valign="baseline" width="100%"><i>frame stream button-press-event</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>This function is responsible for handling user pointer events on behalf of the
<a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> in the input context <tt>*input-context*</tt> .
<i>stream</i> is the window on which <i>button-press-event</i> took place.
<p>
The default implementation (on <tt>standard-application-frame</tt> ) unhighlights any
highlighted presentations, finds the applicable presentation by calling
<tt>frame-find-innermost-applicable-presentation-at-position</tt> , and then calls
<tt>throw-highlighted-presentation</tt> to execute the translator on that
presentation that corresponds to the user's gesture.
<p>
If <tt>frame-input-context-button-press-handler</tt> is called when the pointer is
not over any applicable presentation, <tt>throw-highlighted-presentation</tt> must
be called with a presentation of <tt>*null-presentation*</tt> .
<p>

<a name="Generic function frame-document-highlighted-presentation"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-document-highlighted-presentation</b></td><td valign="baseline" width="100%"><i>frame presentation input-context window x y stream</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>This function is responsible for producing pointer documentation on behalf of
the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> in the input context <i>input-context</i> on the
window <i>window</i> at the point <tt>(x,y)</tt>.  The documentation is displayed on the
<a href="frames.html#CONCEPT=stream"><i>stream</i></a> <i>stream</i> .
<p>
The default method (on <tt>standard-application-frame</tt> ) should produce
documentation that corresponds to calling <tt>document-presentation-translator</tt> on all of the applicable translators in the input context <i>input-context</i> .
<i>presentation</i> , <i>window</i> , <i>x</i> , <i>y</i> , and <i>stream</i> are as for
<tt>document-presentation-translator</tt> .
<p>
Typically pointer documentation will consist of a brief description of each
translator that is applicable to the specified presentation in the specified
input context given the current modifier state for the window.  For example, the
following documentation might be produced when the pointer is pointing to a Lisp
expression when the input context is <tt>form</tt> :
<p>
<pre>Left: '(1 2 3); Middle: (DESCRIBE '(1 2 3)); Right: Menu
</pre> <a name="Generic function frame-drag-and-drop-feedback"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-drag-and-drop-feedback</b></td><td valign="baseline" width="100%"><i>frame presentation stream
                                            initial-x initial-y new-x new-y state</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>The default feedback function for translators defined by
<tt>define-drag-and-drop-translator</tt> , which provides visual feedback during the
dragging phase of such translators on behalf of the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .
<i>presentation</i> is the presentation being dragged on the stream <i>stream</i> .
The pointing device was initially at the position specified by <i>initial-x</i> and <i>initial-y</i> , and is at the position specified by <i>new-x</i> and
<i>new-y</i> when <tt>frame-drag-and-drop-feedback</tt> is invoked.  (Both positions
are supplied for ``rubber-banding'', if that is the sort of desired feedback.)
<i>state</i> will be either <tt>:highlight</tt> , meaning that the feedback should be
drawn, or <tt>:unhighlight</tt> , meaning that the feedback should be erased.
<p>
<a name="Generic function frame-drag-and-drop-highlighting"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-drag-and-drop-highlighting</b></td><td valign="baseline" width="100%"><i>frame presentation stream state</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>The default highlighting function for translators defined by
<tt>define-drag-and-drop-translator</tt> , which is invoked when a ``to object''
should be highlighted during the dragging phase of such translators on behalf of
the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .  <i>presentation</i> is the presentation over which
the pointing device is located on the stream <i>stream</i> .  <i>state</i> will be
either <tt>:highlight</tt> , meaning that the highlighting for the presentation
should be drawn, or <tt>:unhighlight</tt> , meaning that the highlighting should be
erased.
<p>

<a name="28.4"><h2>28.4 The Generic Command Loop</h2></a>
The default application command loop provided by CLIM performs the following
steps:
<p>
<ol> Prompts the user for input.
<p>
Reads a command.  Each application frame has a command table that contains
those commands that the author of the application wishes to allow the user to
invoke at a given time.  Since commands may be read in any number of ways, the
generic command loop enforces no particular interface style.
<p>
Executes the command.  The definition of each command may refer to (and
update) the state variables of the frame, to which <tt>*application-frame*</tt> will
be bound.
<p>
Runs the display function for each pane in the frame as necessary.  The
display function may refer to the frame's state variables.  Display functions
are usually written by the application writer, although certain display
functions are supplied by CLIM itself.  Note that an application frame is free
to have no panes.
</ol> <hr><b>Issue:</b> SWM<br><i>RWK has a reasonable proposal for breaking down command loops into
their component pieces.  It should be integrated here.</i><hr>
All classes that inherit from <tt>application-frame</tt> must inherit or implement
methods for all of the following functions.
<p>

<a name="Generic function run-frame-top-level"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>run-frame-top-level</b></td><td valign="baseline" width="100%"><i>frame <tt>&amp;key</tt> <tt>&amp;allow-other-keys</tt> </i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Runs the top-level function for the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .  The default
method on <tt>application-frame</tt> simply invokes the top-level function for the
frame (which defaults to <tt>default-frame-top-level</tt> ).
<p>
<a name="Method :around run-frame-top-level"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>run-frame-top-level</b></td><td valign="baseline" width="100%"><i>(frame <tt>application-frame</tt> ) <tt>&amp;key</tt> </i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Method :around]</b></td></tr></table>The <tt>:around</tt> method of <tt>run-frame-top-level</tt> on the
<tt>application-frame</tt> class is responsible for establish the initial dynamic
bindings for the application, including (but not limited to) binding
<tt>*application-frame*</tt> to <i>frame</i> , binding <tt>*input-context*</tt> to
<tt>nil</tt> , resetting the delimiter and activation gestures, and binding
<tt>*input-wait-test*</tt> , <tt>*input-wait-handler*</tt> , and
<tt>*pointer-button-press-handler*</tt> to <tt>nil</tt> .
<p>

<a name="Generic function default-frame-top-level"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>default-frame-top-level</b></td><td valign="baseline" width="100%"><i>frame <tt>&amp;key</tt> command-parser command-unparser 
                                                  partial-command-parser
                                                  prompt</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>The default top-level function for application frames.  This function implements
a ``read-eval-print'' loop that displays a prompt, calls
<tt>read-frame-command</tt> , then calls <tt>execute-frame-command</tt> , and finally
redisplays all of the panes that need to be redisplayed.
<p>
<tt>default-frame-top-level</tt> will also establish a simple restart for
<tt>abort</tt> , and bind the standard stream variables as follows.
<tt>*standard-input*</tt> will be bound to the value returned by
<tt>frame-standard-input</tt> .  <tt>*standard-output*</tt> will be bound to the value
returned by <tt>frame-standard-output</tt> .  <tt>*query-io*</tt> will be bound to the
value returned by <tt>frame-query-io</tt> .  <tt>*error-output*</tt> will be bound to the
value returned by <tt>frame-error-output</tt> .  It is unspecified what
<tt>*terminal-io*</tt> , <tt>*debug-io*</tt> , and <tt>*trace-output*</tt> will be bound to.
<p>
<i>prompt</i> is either a string to use as the prompt (defaulting to
<tt>"Command: "</tt> ), or a function of two arguments, a stream and the frame.
<p>
<i>command-parser</i> , <i>command-unparser</i> , and <i>partial-command-parser</i> are the same as for <tt>read-command</tt> .  <i>command-parser</i> defaults to
<tt>command-line-command-parser</tt> if there is an interactor, otherwise it
defaults to <tt>menu-only-command-parser</tt> .  <i>command-unparser</i> defaults to
<tt>command-line-command-unparser</tt> .  <i>partial-command-parser</i> defaults to
<tt>command-line-read-remaining-arguments-for-partial-command</tt> if there is an
interactor, otherwise it defaults to
<tt>menu-only-read-remaining-arguments-for-partial-command</tt> .
<tt>default-frame-top-level</tt> binds <tt>*command-parser*</tt> ,
<tt>*command-unparser*</tt> , and <tt>*partial-command-parser*</tt> to the values of
<i>command-parser</i> , <i>command-unparser</i> , and <i>partial-command-parser</i> .
<p>

<a name="Generic function read-frame-command"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>read-frame-command</b></td><td valign="baseline" width="100%"><i>frame <tt>&amp;key</tt> (stream <tt>*standard-input*</tt> )</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Reads a command from the stream <i>stream</i> on behalf of the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .  The returned value is a command object.
<p>
The default method (on <tt>standard-application-frame</tt> ) for
<tt>read-frame-command</tt> simply calls <tt>read-command</tt> , supplying <i>frame</i> 's
current command table as the command table.
<p>
<a name="Generic function execute-frame-command"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>execute-frame-command</b></td><td valign="baseline" width="100%"><i>frame command</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Executes the command <i>command</i> on behalf of the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .
<i>command</i> is a command object, that is, a cons of a command name and a list
of the command's arguments.
<p>
The default method (on <tt>standard-application-frame</tt> ) for
<tt>execute-frame-command</tt> simply applies the <tt>command-name</tt> of <i>command</i> to <tt>command-arguments</tt> of <i>command</i> .
<p>
If process that <tt>execute-frame-command</tt> is invoked in is not the same process
the one <i>frame</i> is running in, CLIM may need to make special provisions in
order for the command to be correctly executed, since as queueing up a special
``command event'' in <i>frame</i> 's event queue.  The exact details of how this
should work is left unspecified.
<p>

<a name="Generic function command-enabled"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>command-enabled</b></td><td valign="baseline" width="100%"><i>command-name frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns <a href="frames.html#CONCEPT=true"><i>true</i></a> if the command named by <i>command-name</i> is presently
enabled in the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> , otherwise returns <a href="frames.html#CONCEPT=false"><i>false</i></a> .  If
<i>command-name</i> is not accessible to the command table being used by
<i>frame</i> , <tt>command-enabled</tt> returns <a href="frames.html#CONCEPT=false"><i>false</i></a> .
<p>
Whether or not a particular command is currently enabled is stored independently
for each instance of an application frame; this status can vary between frames
that share a single command table.
<p>
<a name="Generic function (setf command-enabled)"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>(setf command-enabled)</b></td><td valign="baseline" width="100%"><i>enabled command-name frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>If <i>enabled</i> is <a href="frames.html#CONCEPT=false"><i>false</i></a> , this disables the use of the command named by
<i>command-name</i> while in the <a href="frames.html#CONCEPT=frame"><i>frame</i></a> <i>frame</i> .  Otherwise if
<i>enabled</i> is <a href="frames.html#CONCEPT=true"><i>true</i></a> , the use of the command is enabled.  After the
command has been enabled (or disabled), <tt>note-command-enabled</tt> (or
<tt>note-command-disabled</tt> ) is invoked on the frame manager and the frame in
order to update the appearance of the interface, for example, ``graying out'' a
disabled command.
<p>
If <i>command-name</i> is not accessible to the command table being used by
<i>frame</i> , using <tt>setf</tt> on <tt>command-enabled</tt> does nothing.
<p>

<a name="Generic function display-command-menu"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>display-command-menu</b></td><td valign="baseline" width="100%"><i>frame stream
                                    <tt>&amp;key</tt> command-table initial-spacing row-wise
                                         max-width max-height n-rows n-columns
                                         (cell-align-x <tt>:left</tt> ) (cell-align-y <tt>:top</tt> )</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Displays the menu associated with the specified command table on <i>stream</i> by
calling <tt>display-command-table-menu</tt> .  If <i>command-table</i> is not
supplied, it defaults to <tt>(frame-command-table <i>stream</i> )</tt> .  This function
is generally used as the display function for panes that contain command menus.
<p>
<i>initial-spacing</i> , <i>max-width</i> , <i>max-height</i> , <i>n-rows</i> ,
<i>n-columns</i> , <i>row-wise</i> , <i>cell-align-x</i> , and <i>cell-align-y</i> are
as for <tt>formatting-item-list</tt> .
<p>

<a name="28.5"><h2>28.5 Frame Managers</h2></a>
Frames may be <a name="CONCEPT=adopted"><b><i>adopted</i></b></a> by a frame manager, which involves invoking a
protocol for generating the pane hierarchy of the frame.  This protocol provides
for selecting pane types for abstract gadget panes based on the style
requirements imposed by the frame manager.  That is, the frame manager is
responsible for the ``look and feel'' of a frame.
<p>
After a frame is adopted it can be in any of the three following states:
<a name="CONCEPT=enabled"><b><i>enabled</i></b></a> , <a name="CONCEPT=disabled"><b><i>disabled</i></b></a> , or <a name="CONCEPT=shrunk"><b><i>shrunk</i></b></a> .  An enabled frame is
visible unless it is occluded by other frames or the user is browsing outside of
the portion of the frame manager's space that the frame occupies.  A shrunken
frame provides a cue or handle for the frame, but generally will not show the
entire contents of the frame.  For example, the frame may be iconified or an
item for the frame may be placed in a special suspended frame menu.  A disabled
frame is not visible, nor is there any user accessible handle for enabling the
frame.
<p>
Frames may also be <a name="CONCEPT=disowned"><b><i>disowned</i></b></a> , which involves releasing the frame's
panes as well as all associated foreign resources.
<p>
<a name="Protocol&nbsp;Class frame-manager"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="100%"><b>frame-manager</b></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Protocol&nbsp;Class]</b></td></tr></table>The protocol class that corresponds to a frame manager.
If you want to create a new class that behaves like a frame manager, it should be a subclass of <b>frame-manager</b>. Subclasses of <b>frame-manager</b> must obey the frame manager protocol.There are no advertised standard frame manager classes.  Each port will
implement one or more frame managers that correspond to the look and feel for
the port.
<p>
<a name="Predicate frame-mananger-p"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-mananger-p</b></td><td valign="baseline" width="100%"><i>object</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Predicate]</b></td></tr></table>Returns <a href="frames.html#CONCEPT=true"><i>true</i></a> if <i>object</i> is a <a href="frames.html#CONCEPT=frame manager"><i>frame manager</i></a> , otherwise returns
<a href="frames.html#CONCEPT=false"><i>false</i></a> .
<p>

<a name="28.5.1"><h3>28.5.1 Finding Frame Managers</h3></a>
Most frames need only deal directly with frame managers to the extent that they
need to find a frame manager into which they can insert themselves.  Since
frames will usually be invoked by some user action that is handled by some frame
manager, finding an appropriate frame manager is usually straightforward.
<p>
Some frames will support the embedding of other frames within themselves.  Such
frames would not only use frames but also act as frame managers, so that other
frames could insert frames.  In this case, the embedded frames are mostly
unaware that they are nested within other frames, but only know that they are
controlled by a particular frame manager.  
<p>
<hr><b>Issue:</b> SWM<br><i>How does one write a frame that supports an embedded frame, such
as an editor frame within a documentation-writing frame?</i><hr>
The <tt>find-frame-manager</tt> function provides a flexible means for locating an
frame manager to adopt an application's frames into.  There are a variety of
ways that the user or the application can influence where an application's frame
is adopted.
<p>
An application can establish an application default frame manager using
<tt>with-frame-manager</tt> .  A frame's top-level loop automatically establishes the
frame's frame manager.
<p>
The programmer or user can influence what frame manager is found by setting
<tt>*default-frame-manager*</tt> or <tt>*default-server-path*</tt> .
<p>
Each frame manager is associated with one specific port.  However, a single port
may have multiple frame managers managing various frames associated with the
port.
<p>

<a name="Function find-frame-manager"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>find-frame-manager</b></td><td valign="baseline" width="100%"><i><tt>&amp;rest</tt> options <tt>&amp;key</tt> port <tt>&amp;allow-other-keys</tt> </i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Function]</b></td></tr></table>Finds an appropriate frame manager that conforms to the options, including the
<i>port</i> argument.  Furthermore, CLIM applications may set up dynamic contexts
that affect what <tt>find-frame-manager</tt> will return.
<p>
<i>port</i> defaults to the value returned by <tt>find-port</tt> applied to the remaining options.
<p>
A frame manager is found using the following rules in the order listed:
<p>
<ol> If a current frame manager has been established via an invocation of
<tt>with-frame-manager</tt> , as is the case within a frame's top-level, and that
frame manager conforms to the options, it is returned.  The exact definition of
``conforming to the options'' varies from one port to another, but it may
include such things as matching the console number, color or resolution
properties, and so forth.  If the options are empty, then any frame manager will
conform.
<p>
If <tt>*default-frame-manager*</tt> is bound to a currently active frame
manager and it conforms to the options, it is returned.
<p>
If <i>port</i> is <tt>nil</tt> , a port is found and an appropriate
frame manager is constructed using <tt>*default-server-path*</tt> .
</ol> <a name="Variable *default-frame-manager*"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="100%"><b>*default-frame-manager*</b></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Variable]</b></td></tr></table>This variable provides a convenient point for allowing a programmer or user to
override what frame manager type would normally be selected.  Most users will
not set this variable since they can set <tt>*default-server-path*</tt> to indicate
which host window system they want to use and are willing to use whatever frame
manager is the default for the particular port.  However, some users may want to
use a frame manager that isn't the typical frame manager.  For example, a user
may want to use both an OpenLook frame manager and a Motif frame manager on a
single port.
<p>
<a name="Macro with-frame-manager"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>with-frame-manager</b></td><td valign="baseline" width="100%"><i>(frame-manager) <tt>&amp;body</tt> body</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Macro]</b></td></tr></table>Generates a dynamic context that causes all calls to <tt>find-frame-manager</tt> to
return <i>frame-manager</i> if the <i>where</i> argument passed to it conforms to
<i>frame-manager</i> .  Nested calls to <tt>with-frame-manager</tt> will shadow outer
contexts.  <i>body</i> may have zero or more declarations as its first forms.
<p>

<a name="28.5.2"><h3>28.5.2 Frame Manager Operations</h3></a>
<a name="Generic function frame-manager"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-manager</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns the current frame manager of <i>frame</i> if it is adopted, otherwise
returns <tt>nil</tt> .
<p>
<a name="Generic function (setf frame-manager)"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>(setf frame-manager)</b></td><td valign="baseline" width="100%"><i>frame-manager frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Changes the frame manager of <i>frame</i> to <i>frame-manager</i> .  In effect, the
frame is disowned from its old frame manager and is adopted into the new frame
manager.  Transferring a frame preserves its <tt>frame-state</tt> , for example, if
the frame was previously enabled it will be enabled in the new frame manager.
<p>
<a name="Generic function frame-manager-frames"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-manager-frames</b></td><td valign="baseline" width="100%"><i>frame-manager</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns a list of all of the frames being managed by <i>frame-manager</i> .
<i>This function returns objects that reveal CLIM's internal state; do not modify those objects. </i><a name="Generic function adopt-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>adopt-frame</b></td><td valign="baseline" width="100%"><i>frame-manager frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table><a name="Generic function disown-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>disown-frame</b></td><td valign="baseline" width="100%"><i>frame-manager frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>These functions insert or remove a frame from a frame manager's control.  These
functions allow a frame manager to allocate and deallocate resources associated
with a frame.  For example, removing a frame from a frame manager that is
talking to a remote server allows it to release all remote resources used by the
frame.
<p>
<a name="Method port"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>port</b></td><td valign="baseline" width="100%"><i>(frame <tt>standard-application-frame</tt> )</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Method]</b></td></tr></table>If <i>frame</i> has been adopted by a frame manager, this returns the port with
which <i>frame</i> is associated.  Otherwise it returns <tt>nil</tt> .
<p>
<a name="Method port"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>port</b></td><td valign="baseline" width="100%"><i>(frame-manager <tt>standard-frame-manager</tt> )</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Method]</b></td></tr></table>Returns the port with which <i>frame-manager</i> is associated.
<p>
<a name="Generic function frame-state"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-state</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Returns one of <tt>:disowned</tt> , <tt>:enabled</tt> , <tt>:disabled</tt> , or <tt>:shrunk</tt> ,
indicating the current state of frame.
<p>
<a name="Generic function enable-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>enable-frame</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table><a name="Generic function disable-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>disable-frame</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table><a name="Generic function shrink-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>shrink-frame</b></td><td valign="baseline" width="100%"><i>frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>These functions force a frame into the enabled, disabled, or shrunken
(iconified) states.  A frame in the enabled state may be visible if it is not
occluded or placed out of the user's focus of attention.  A disabled frame is
never visible.  A shrunk frame is accessible to the user for re-enabling, but
may be represented in some abbreviated form, such as an icon or a menu item.
<p>
These functions call the notification functions describe below to notify the
frame manager that the state of the frame changed.
<p>
<a name="Generic function note-frame-enabled"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>note-frame-enabled</b></td><td valign="baseline" width="100%"><i>frame-manager frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table><a name="Generic function note-frame-disabled"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>note-frame-disabled</b></td><td valign="baseline" width="100%"><i>frame-manager frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table><a name="Generic function note-frame-iconified"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>note-frame-iconified</b></td><td valign="baseline" width="100%"><i>frame-manager frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table><a name="Generic function note-frame-deiconified"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>note-frame-deiconified</b></td><td valign="baseline" width="100%"><i>frame-manager frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Notifies the frame manager <i>frame-manager</i> that the frame <i>frame</i> has
changed its state to the enabled, disabled, iconified, or deiconified state,
respectively.
<p>

<a name="Generic function note-command-enabled"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>note-command-enabled</b></td><td valign="baseline" width="100%"><i>frame-manager frame command-name</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table><a name="Generic function note-command-disabled"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>note-command-disabled</b></td><td valign="baseline" width="100%"><i>frame-manager frame command-name</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Notifies the frame manager <i>frame-manager</i> that the command named by
<i>command-name</i> has been enabled or disabled (respectively) in the frame
<i>frame</i> .  The frame manager can update the appearance of the user interface
as appropriate, for instance, by ``graying out'' a newly disabled command from a
command menu or menu bar.
<p>

<a name="Generic function frame-manager-notify-user"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>frame-manager-notify-user</b></td><td valign="baseline" width="100%"><i>framem message-string
                                         <tt>&amp;key</tt> frame associated-window title documentation
                                              exit-boxes name style text-style</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>This is the generic function used by <tt>notify-user</tt> .  The arguments are as for
<tt>notify-user</tt> .  The default method on <tt>standard-frame-manager</tt> will
display a dialog or an alert box that contains the message and has exit boxes
that allow the user to dismiss the notification.
<p>

<a name="Generic function generate-panes"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>generate-panes</b></td><td valign="baseline" width="100%"><i>frame-manager frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>This function is invoked by a standard method of <tt>adopt-frame</tt> .
<tt>define-application-frame</tt> automatically supplies a <tt>generate-panes</tt> method if either the <tt>:pane</tt> or <tt>:panes</tt> option is used in the
<tt>define-application-frame</tt> .
<p>
It is the responsibility of this method to call <tt>setf</tt> on <tt>frame-panes</tt> on
the frame in order to set the current
<p>
<a name="Generic function find-pane-for-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>find-pane-for-frame</b></td><td valign="baseline" width="100%"><i>frame-manager frame</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>This function is invoked by a standard method of <tt>adopt-frame</tt> .  It must
return the root pane of the frame's layout.  It is the responsibility of the
frame implementor to provide a method that constructs the frame's top-level
pane.  <tt>define-application-frame</tt> automatically supplies a a method for this
function if either the <tt>:pane</tt> or <tt>:panes</tt> option is used in the
<tt>define-application-frame</tt> .
<p>

<a name="28.5.3"><h3>28.5.3 Frame Manager Settings</h3></a>
CLIM provides frame manager settings in order to allow a frame to communicate
information to its frame manager.
<p>
<a name="Generic function (setf client-setting)"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>(setf client-setting)</b></td><td valign="baseline" width="100%"><i>value frame setting</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Sets the setting <i>setting</i> to <i>value</i> for the frame <i>frame</i> .
<p>
<a name="Generic function reset-frame"></a><table cellspacing="0" cellpadding="0"><tr valign="baseline"><td nowrap="nowrap" width="0%"><b>reset-frame</b></td><td valign="baseline" width="100%"><i>frame <tt>&amp;rest</tt> client-settings</i></td><td align=right nowrap="nowrap" valign="baseline" width="0%"><b>[Generic function]</b></td></tr></table>Resets the settings of frame.  <tt>reset-frame</tt> invokes a protocol that forces
the frame manager to notice that the settings have changed, where the setf
generic function just updates the frame data.  For example, the width and height
can be reset to force resizing of the window.
<p>

<a name="28.6"><h2>28.6 Examples of Applications</h2></a>
The following is an example that outlines a simple 4-by-4 sliding piece puzzle:
<p>
<pre>(define-application-frame puzzle ()
    ((puzzle-array :initform (make-array '(4 4))))
  (:menu-bar t)
  (:panes
    (display
      (outlining ()
        (make-pane 'application-pane
                   :text-cursor nil
                   :width :compute
                   :height :compute
                   :incremental-redisplay T
                   :display-function 'draw-puzzle))))
  (:layouts
    (:default display)))
<p>
(defmethod run-frame-top-level :before ((puzzle puzzle))
  ;; Initialize the puzzle
  ...)
<p>
(define-presentation-type puzzle-cell ()
  :inherit-from '(integer 1 15))
<p>
(defmethod draw-puzzle ((puzzle puzzle) stream &key max-width max-height)
  (declare (ignore max-width max-height))
  ;; Draw the puzzle, presenting each cell as a PUZZLE-CELL
  ...)
<p>
(define-puzzle-command com-move-cell
    ((cell 'puzzle-cell :gesture :select))
  ;; Move the selected cell to the adjacent open cell,
  ;; if there is one
  ...)
<p>
(define-puzzle-command (com-scramble :menu t)
    ()
  ;; Scramble the pieces of the puzzle
  ...)
<p>
(define-puzzle-command (com-exit-puzzle :menu "Exit")
    ()
  (frame-exit *application-frame*))
<p>
(defun puzzle ()
  (let ((puzzle 
          (make-application-frame 'puzzle 
            :width 80 :height 80)))
    (run-frame-top-level puzzle)))
</pre> The following is an application frame with two layouts:
<p>
<pre>(define-application-frame test-frame () ()
  (:panes
    (a (horizontally ()
         (make-pane 'push-button :label "Press me")
         (make-pane 'push-button :label "Squeeze me")))
    (b toggle-button)
    (c slider)
    (d text-field)
    (e :interactor-pane
       :width 300 :max-width +fill+
       :height 300 :max-height +fill+))
  (:layouts
    (default 
      (vertically ()
        a b c (scrolling () e)))
    (other
      (vertically ()
        a (scrolling () e) b d))))
<p>
(define-test-frame-command (com-switch :name t :menu t)
    ()
  (setf (frame-current-layout *application-frame*)
        (ecase (frame-current-layout *application-frame*)
          (default other)
          (other default))))
<p>
(let ((test-frame 
        (make-application-frame 'test-frame)))
  (run-frame-top-level test-frame))
</pre> <br><hr><br><table width=100%><tr valign="baseline">
<td width=25% align=left><a href="commands.html">Command Processing</a></td>
<td width=25% align=center><a href="toc.html">Contents</a></td>
<td width=25% align=center><a href="index.html">Index</a></td>
<td width=25% align=right><a href="panes.html">Panes</a></td>
</tr></table>
</body></html>
